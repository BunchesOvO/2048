<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<title>2048</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
		<script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
		<script src="https://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
		<link href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="index.css" />
		<script type="text/javascript" src="index.js"></script>
		<script src="Scripts/jquery-1.5.1.js" type="text/javascript"></script>


	</head>
	<body>
		<div id='menu'>
			<button onclick="begin()">开始游戏</button>
		</div>
		<div id='addId'>
			<form action="http://127.0.0.1:8081/reg" method="post">
				<div id='idbox'>
					<span>请输入id：</span>
					<input type="text" name="names">
					<span>请输入密码：</span>
					<input type="password" name="passwords">
					<!-- <ul>
						<li>
							<span>请输入id：</span>
							<input type="text" name="names">
						</li>
						<li>
							<span>请输入密码：</span>
							<input type="password" name="passwords">
						</li>
					</ul> -->
				</div>
				<div class="postbtn">
					<input class="logon" type="button" value="注册" />
					<input class="login" type="button" value="登录" />
				</div>
			</form>
			
		</div>

		<div class="container" id="2048">
			<div class="main">
				<div class="gameName">2048</div>
				<div class="player"><span id="pname"></span></div>
				<div class="score">
					<div class="gameScore ">得分：
						<span id="gameScore">0</span>
					</div>
					<div class="maxScore">最高分：
						<span id="maxScore">0</span>
					</div>
				</div>
				<div class="col-sm-3 col-md-4"></div>
				<div class="gameBody col-sm-6 col-md-4" id="gameBody">
					<div class="row">
						<div class="block emptyblock x0y0" x="0" y="0"></div>
						<div class="block emptyblock x0y1" x="0" y="1"></div>
						<div class="block emptyblock x0y2" x="0" y="2"></div>
						<div class="block emptyblock x0y3" x="0" y="3"></div>
					</div>
					<div class="row">
						<div class="block emptyblock x1y0" x="1" y="0"></div>
						<div class="block emptyblock x1y1" x="1" y="1"></div>
						<div class="block emptyblock x1y2" x="1" y="2"></div>
						<div class="block emptyblock x1y3" x="1" y="3"></div>
					</div>
					<div class="row">
						<div class="block emptyblock x2y0" x="2" y="0"></div>
						<div class="block emptyblock x2y1" x="2" y="1"></div>
						<div class="block emptyblock x2y2" x="2" y="2"></div>
						<div class="block emptyblock x2y3" x="2" y="3"></div>
					</div>
					<div class="row">
						<div class="block emptyblock x3y0" x="3" y="0"></div>
						<div class="block emptyblock x3y1" x="3" y="1"></div>
						<div class="block emptyblock x3y2" x="3" y="2"></div>
						<div class="block emptyblock x3y3" x="3" y="3"></div>
					</div>
				</div>
				<div class="col-sm-4 col-md-4"></div>

				<div class="modal fade" id="gameOverModal" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
									×
								</button>
							</div>
							<div class="modal-body">
								Game Over!
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-info" data-dismiss="modal">关闭</button>
								<button type="button" class="btn btn-danger refreshBtn" onclick="refreshGame()">再玩一次</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class='rank' id='rank'>
			<div id='rankall'>
				<div class='rankName'>排行榜</div>
				<div id='rankbox'>
					<table id="rankData">
				</div>

				<div id='allScore'></div>
			</div>
		</div>

		<script type="text/javascript">
			$(function() {
				$(".logon").on('click', function() {
					var names = $("input:nth-of-type(1)").val();
					var passwords = $("input:nth-of-type(2)").val();
					$.post("http://127.0.0.1:8081/reg", {
						names: names,
						passwords: passwords
					}, function(res) {
						if (0 == res.status) {
							alert("注册成功");
						}else alert("账号已存在");
						
					})
				});
				$(".login").on('click', function() {
					var names = $("input:nth-of-type(1)").val();
					var passwords = $("input:nth-of-type(2)").val();
					$.post("http://127.0.0.1:8081/login", {
						names: names,
						passwords: passwords
					}, function(res) {
						if (0 == res.status) {
							alert("登陆成功");
							document.getElementById('addId').style.display = 'none';
							document.getElementById('2048').style.display = 'flex';
							document.getElementById('rank').style.display = 'inline';
							showAllTheData();
							$('#pname').html(res.msg);
						} else if(2 == res.status){
							alert("密码错误");
						}else alert("账号不存在");
					})
				});
			})
		</script>
	</body>
</html>
